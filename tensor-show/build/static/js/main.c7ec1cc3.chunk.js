(this["webpackJsonptensor-show"]=this["webpackJsonptensor-show"]||[]).push([[0],{112:function(e,a,t){e.exports=t(155)},147:function(e,a){},155:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),o=t.n(l),i=(t(81),t(199)),s=t(18),c=t(194),u=t(197),d=t(40),p=t(102),m=t(7),y=r.a.createContext(null),h=r.a.createContext(null),g=function(e){var a=e.children,t=r.a.useReducer((function(e,a){switch(a.type){case"add":return e[[a.layerID]]=a.layer_info,e[[a.layerID]].inModel=!1,e;case"delete":return delete e[[a.layerID]],e;case"update":return console.log(JSON.parse(JSON.stringify(e))),e[[a.layerID]]=Object.assign({},e[[a.layerID]],a.layer_info),console.log(JSON.parse(JSON.stringify(e))),e;case"add_to_model":return e[[a.layerID]].inModel=a.model_key,e}}),{"000":{layer_name:"Input Layer",layer_type:"input_layer",parent_pos:"root",inModel:!1,position:{row:0,group:0,slot:0},layer_params:{dataset_name:"",shape:"",labels:""}}}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(y.Provider,{value:l},r.a.createElement(h.Provider,{value:o},a))},v=function(){var e=r.a.useContext(y);return void 0===e?void alert("Please place useCurrentLayerState in LayerInfoStoreStateContext"):e},f=function(){var e=r.a.useContext(h);return void 0===e?void alert("Please place useCurrentLayerDispatch in LayerInfoStoreDispatchContext"):e},_=r.a.createContext(null),E=r.a.createContext(null),w=function(e){var a=e.children,t=r.a.useReducer((function(e,a){switch(a.type){case"add_model":return e[[a.model_key]]={status:"init",model_name:a.model_name,layerIDs:a.layerIDs},e;case"delete_model":return delete e[[a.modelID]],e;case"update_status":e[[a.model_key]].status=a.status}}),{}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(_.Provider,{value:l},r.a.createElement(E.Provider,{value:o},a))},x=function(){var e=r.a.useContext(_);return void 0===e?void alert("Please place useCurrentLayerState in ModelStoreStateContext"):e},b=function(){var e=r.a.useContext(E);return void 0===e?void alert("Please place useCurrentLayerDispatch in ModelStoreDispatchContext"):e},C=Object(c.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:275,width:250,backgroundColor:"#f5f5f5"},rootModel:{display:"flex",flexDirection:"column",alignItems:"center",height:150,width:250,backgroundColor:"#f5f5f5"},header:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:5,height:70,width:"100%",borderBottomLeftRadius:20,borderBottomRightRadius:20,boxShadow:"0px 2px 2px grey",backgroundColor:"#ff911c"},editButton:{marginTop:1,width:"60%",backgroundColor:"#bf711d"},addLayerButton:{marginTop:10,width:"60%"},contentBox:{position:"relative",marginTop:10,height:150,width:240,borderRadius:10,boxShadow:"0px 2px 2px grey"},contentBoxModel:{position:"relative",marginTop:10,height:100,width:240,borderRadius:10,boxShadow:"0px 2px 2px grey"},contentDivider:{position:"absolute",left:"47.5%",top:"5%",borderLeft:"2px solid black",height:"90%"},labelBox:{position:"absolute",paddingRight:5,top:0,left:0,height:"100%",width:"45%",display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-evenly"},valueBox:{position:"absolute",paddingLeft:10,top:0,left:"50%",height:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-evenly"}}}));function k(e){var a,t,n,l=C(),o=x(),i=v(),s=(f(),i[e.layerID]),c=s.layer_name,m=s.layer_type,y=s.layer_params;switch(m){case"input_layer":a={labels:["Dataset Name","Dataset Shape","Dataset Labels"],values:[y.dataset_name,y.shape,y.labels]};break;case"conv_layer":a={labels:["Window Shape","Window Stride","Activation","Regularization"],values:["".concat(y.window.width," x ").concat(y.window.height," x ").concat(y.window.channels),"X: ".concat(y.stride.x,", Y: ").concat(y.stride.x),y.activation,y.regularization]};break;case"pool_layer":a={labels:["Window Shape","Window Stride","Pooling"],values:["".concat(y.window.width," x ").concat(y.window.height," x ").concat(y.window.channels),"X: ".concat(y.stride.x,", Y: ").concat(y.stride.x),y.pooling]};break;case"full_layer":a={labels:["Output Units","Activation","Regularization"],values:[y.output.units,y.activation,y.regularization]};break;case"model":a={labels:["Model Depth"],values:[o[e.layerID].layerIDs.length-1]}}t=a.labels,n=a.values;var h=r.a.createElement(u.a,{size:"small",className:l.editButton,variant:"contained",onClick:function(a){return e.editLayer(a,e.sender_pos)}},"Edit Layer"),g=r.a.createElement(u.a,{size:"small",className:l.editButton,variant:"contained",onClick:function(a){return e.chooseDataset(a)}},"Choose Dataset"),_=r.a.createElement(u.a,{size:"small",className:l.editButton,variant:"contained",onClick:function(a){return e.editModel(a,e.layerID)}},"View Model"),E=r.a.createElement(u.a,{size:"small",className:l.addLayerButton,variant:"contained",onClick:function(a){return e.addChild(a,e.sender_pos)}},"Add Layer"),w=h;"input_layer"===m?w=g:"model"===m&&(w=_);var b=r.a.createElement("div",{className:l.header},r.a.createElement(d.a,{variant:"h6",align:"center"},c),w),k=r.a.createElement(p.a,{className:"model"===m?l.contentBoxModel:l.contentBox},r.a.createElement("div",{className:l.labelBox},t.map((function(e){return r.a.createElement(d.a,{variant:"body2"},e)}))),r.a.createElement("div",{className:l.contentDivider}),r.a.createElement("div",{className:l.valueBox},n.map((function(e){return r.a.createElement(d.a,{variant:"body2"},e)})))),S=E;return"full_layer"===m?y.last_layer&&(S=null):"model"===m&&(S=null),r.a.createElement(p.a,{className:"model"===m?l.rootModel:l.root},b,k,S)}var S=t(101),D=r.a.createContext(null),T=r.a.createContext(null),O=function e(a,t){var n,r,l,o,i,c,u,d=t,p=d-1,m=Object(s.a)({},a),y=Object.keys(m.rows[d].groups);for(y.sort(),n=0;n<y.length;n++)for(u=0,l=y[n],i=Object.keys(m.rows[d].groups[l].slots).sort(),r=0;r<i.length;r++)o=i[r],m.rows[d].groups[l].slots[o].disp.x=u,u+=m.rows[d].groups[l].slots[o].disp.width;if(m=function(e,a){var t,n,r,l,o,i,s;for((t=Object.keys(e.rows[a].groups)).sort(),r=0;r<t.length;r++){for(s=0,o=t[r],n=Object.keys(e.rows[a].groups[o].slots),l=0;l<n.length;l++)i=n[l],s+=e.rows[a].groups[o].slots[i].disp.width;e.rows[a].groups[o].disp.width=s}var c=0;for((t=Object.keys(e.rows[a].groups)).sort(),r=0;r<t.length;r++)o=t[r],e.rows[a].groups[o].disp.x=c,c+=e.rows[a].groups[o].disp.width;return e.rows[a].disp.width=c,e}(m,d),-1==p)return m;for(n=0;n<y.length;n++)l=y[n],l=(c=m.rows[d].groups[l]).sender_group,o=c.sender_slot,m.rows[d-1].groups[l].slots[o].disp.width=c.disp.width;return e(m,p)},j=function(e,a,t){var n,r,l;if(void 0===e.rows[a].groups[t])return e;n=Object.keys(e.rows[a].groups[t].slots);var o=!0;for(r=0;r<n.length;r++)l=n[r],e.rows[a].groups[t].slots[l].render&&(o=!1);return o&&delete e.rows[a].groups[t],e},N=function(e,a){var t,n,r,l,o,i,s;for(t=!0,n=Object.keys(e.rows[a].groups),r=0;r<n.length;r++)for(l=n[r],o=Object.keys(e.rows[a].groups[l].slots),!0,i=0;i<o.length;i++)s=o[i],e.rows[a].groups[l].slots[s].render&&(t=!1,!1);return t&&delete e.rows[a],e},P=function(e,a){switch(a.type){case"init":return JSON.parse(JSON.stringify(e));case"delete_node":var t=Object(s.a)({},e),n=a.sender_pos.row,r=a.sender_pos.group,l=a.sender_pos.slot;if(void 0===e.rows[n])return t;if(void 0===e.rows[n].groups[r])return t;t=function e(a,t,n,r){var l=t+1;if(void 0===a.rows[l])return delete a.rows[t].groups[n].slots[r],a=j(a,t,n),a=N(a,t);var o="".concat(n).concat(r);if(void 0===a.rows[l].groups[o])return delete a.rows[t].groups[n].slots[r],a=j(a,t,n),a=N(a,t);var i,s=Object.keys(a.rows[l].groups[o].slots);for(i=0;i<s.length;i++)a=e(a,l,o,s[i]);return delete a.rows[t].groups[n].slots[r],0===Object.keys(a.rows[t].groups[n].slots).length&&delete a.rows[t].groups[n],a=j(a,t,n),a=N(a,t)}(t,n,r,l);for(var o,i,c,u,d,p,m,y,h=Object.keys(t.rows),g=0;g<h.length-1;g++){u=parseInt(h[g],10),m=t.rows[u],i=Object.keys(m.groups).sort();for(var v=0;v<i.length;v++){d=i[v],y=t.rows[u].groups[d],c=Object.keys(y.slots).sort();for(var f=0;f<c.length;f++)p=c[f],t.rows[u].groups[d].slots[p],o="".concat(d).concat(p),void 0===t.rows[u+1].groups[o]&&(t.rows[u+1].groups[o]={disp:{x:0,y:0,width:300,height:300},sender_group:d,sender_slot:p,slots:{0:{disp:{x:0,y:0,width:300,height:300},active_connections:[!1,!1,!1,!1],render:!1}}})}}var _=Math.max.apply(Math,Object(S.a)(Object.keys(t.rows).map((function(e){return parseInt(e,10)}))));return t=O(Object(s.a)({},t),_);case"add_child":t=Object(s.a)({},e);var E=a.sender_pos.row,w=a.sender_pos.group,x=a.sender_pos.slot,b=t.rows[E].groups[w].slots[x],C=(b.group_path,b.slot_path,E+1),k="".concat(w).concat(x),D=a.sender_pos.connection;void 0===t.rows[E+1]&&(t.rows[E+1]={disp:{x:0,y:0+350*(E+1),width:300,height:300},groups:{}});var T,P,I,F,L,M,W,z,A=Object.keys(t.rows);for(g=0;g<A.length-1;g++){F=parseInt(A[g],10),W=t.rows[F],P=Object.keys(W.groups).sort();for(v=0;v<P.length;v++){L=P[v],z=t.rows[F].groups[L],I=Object.keys(z.slots).sort();for(f=0;f<I.length;f++)M=I[f],t.rows[F].groups[L].slots[M],T="".concat(L).concat(M),void 0===t.rows[F+1].groups[T]&&(t.rows[F+1].groups[T]={disp:{x:0,y:0,width:300,height:300},sender_group:L,sender_slot:M,slots:{0:{disp:{x:0,y:0,width:300,height:300},active_connections:[!1,!1,!1,!1],render:!1}}})}}t.rows[C].groups[k];var G={disp:{x:0,y:0,height:300,width:300},active_connections:[],render:!0};return t.rows[C].groups[k].slots[D]=G,t.rows[E].groups[w].slots[x].active_connections.push(D),t=O(Object(s.a)({},t),A.length-1);default:return e}},I=function(e){var a={rows:{0:{disp:{x:0,y:0,height:300,width:300},groups:{0:{disp:{x:0,y:0,height:300,width:300},slots:{0:{disp:{x:0,y:0,height:300,width:300},active_connections:[],render:!0}}}}}}},t=r.a.useReducer((function(e,a){return P(e,a)}),a),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(D.Provider,{value:l},r.a.createElement(T.Provider,{value:o},e.children))},F=function(){var e=r.a.useContext(D);return void 0===e?void alert("Please place useSVGCardStoreState in TreePosStoreStateContext"):e};function L(e){for(var a,t,n,l,o,i,c,u,d,p,m,y,h,g,f,_,E,w,x,b,C=F(),S=(v(),e.addChild),D=e.editLayer,T=e.editModel,O=e.chooseDataset,j=[],N=[],P=[],I=Object(s.a)({},C),L=Object.keys(I.rows),M=L.length,W=0;W<M;W++){var z=[];t=parseInt(L[W],10),c=I.rows[t],g=(o=Object.keys(c.groups)).length;for(var A=0;A<g;A++){var G=[];n=o[A],u=c.groups[n],f=(i=Object.keys(u.slots)).length;for(var B=0;B<f;B++)if(l=i[B],a={position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",top:(p=(d=u.slots[l]).disp).y,left:p.x,height:p.height,width:p.width,textAlign:"center"},d.render&&(h=r.a.createElement("div",{style:a,key:"".concat(t).concat(n).concat(l)},r.a.createElement(k,{layerID:"".concat(t).concat(n).concat(l),addChild:S,editLayer:D,editModel:T,chooseDataset:O,sender_pos:{row:t,group:n,slot:l}})),G.push(h),void 0!==I.rows[t+1]&&void 0!==I.rows[t+1].groups["".concat(n).concat(l)])){var R={start_y:I.rows[t].disp.y+200,end_y:I.rows[t+1].disp.y,start_x:u.disp.x+d.disp.x,end_x:u.disp.x+d.disp.x+d.disp.width};j=[];_=[(R.end_x-R.start_x)/2,0],void 0===(b=I.rows[t+1].groups["".concat(n).concat(l)])&&console.log(t,n,l),w=Object.keys(b.slots);for(var V=0;V<w.length;V++)(x=b.slots[w[V]]).render&&(E=[x.disp.x+x.disp.width/2,R.end_y-R.start_y],j.push(r.a.createElement("path",{stroke:"black",strokeWidth:4,fill:"transparent",d:"\n                      M ".concat(_[0]," ").concat(_[1],"\n                      C ").concat(_[0]," ").concat(_[1]+50,", ").concat(E[0]," ").concat(E[1]-50,",\n                      ").concat(E[0]," ").concat(E[1],"\n                      ")})));N.push(r.a.createElement("div",{style:{position:"absolute",left:R.start_x,top:R.start_y,width:R.end_x-R.start_x,height:R.end_y-R.start_y}},r.a.createElement("svg",{height:R.end_y-R.start_y,width:R.end_x-R.start_x},j)))}a={position:"absolute",top:(p=u.disp).y,left:p.x,height:p.height,width:p.width},y=r.a.createElement("div",{style:a,key:"".concat(t).concat(n)},G),z.push(y)}a={zIndex:100,position:"absolute",top:(p=c.disp).y,left:p.x,height:p.height,width:p.width},m=r.a.createElement("div",{style:a,key:"".concat(t)},z),P.push(m)}var J=r.a.createElement("div",null,P);return r.a.createElement("div",{style:{position:"absolute",width:"98%",height:"98%"}},J,N)}var M=t(57),W=t(3),z=t(200),A=t(201),G=t(202),B=t(216),R=t(203),V=t(204),J=t(157),H=t(205),q=t(206),X=t(73),Y=t.n(X),U=t(72),K=t.n(U),Q=t(47),Z=t.n(Q),$=t(48),ee=t.n($),ae=r.a.createContext(null),te=r.a.createContext(null),ne=function(e){var a=e.children,t=r.a.useState({open:!1,model_key:null}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(ae.Provider,{value:l},r.a.createElement(te.Provider,{value:o},a))},re=function(){var e=r.a.useContext(te);return void 0===e?void alert("Please place useCurrentLayerDispatch in EditModelDialogDispatchContext"):e},le=Object(c.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#ff911c"},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1,backgroundColor:"#ff911c"},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start"})}}));function oe(){var e=le(),a=(re(),x(),r.a.useState(!1)),t=Object(m.a)(a,2),n=t[0],l=t[1];return r.a.createElement("div",{className:e.root},r.a.createElement(i.a,null),r.a.createElement(z.a,{position:"fixed",className:Object(W.a)(e.appBar,Object(M.a)({},e.appBarShift,n))},r.a.createElement(A.a,null,r.a.createElement(d.a,{variant:"h6",noWrap:!0,className:e.title},"TensorShow"),r.a.createElement(G.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){l(!0)},className:Object(W.a)(n&&e.hide)},r.a.createElement(K.a,null)))),r.a.createElement(B.a,{className:e.drawer,variant:"persistent",anchor:"right",open:n,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(G.a,{onClick:function(){l(!1)}},r.a.createElement(Y.a,null))),r.a.createElement(R.a,null),r.a.createElement(V.a,null,r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"Saved Models"})),["Inbox","Starred","Send email","Drafts"].map((function(e,a){return r.a.createElement(J.a,{button:!0,key:e},r.a.createElement(q.a,null,a%2===0?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null)),r.a.createElement(H.a,{primary:e}))}))),r.a.createElement(R.a,null),r.a.createElement(V.a,null,r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"Training Models"})),["All mail","Trash","Spam"].map((function(e,a){return r.a.createElement(J.a,{button:!0,key:e},r.a.createElement(q.a,null,a%2===0?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null)),r.a.createElement(H.a,{primary:e}))}))),r.a.createElement(V.a,null,r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"Trained Models"})),["All mail","Trash","Spam"].map((function(e,a){return r.a.createElement(J.a,{button:!0,key:e},r.a.createElement(q.a,null,a%2===0?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null)),r.a.createElement(H.a,{primary:e}))})))))}var ie=t(210),se=t(211),ce=t(212),ue=t(213),de=t(207),pe=t(208),me=t(215),ye=t(160),he=t(163),ge=t(209),ve=t(161),fe=t(166),_e=r.a.createContext(null),Ee=r.a.createContext(null),we=function(e){var a=e.children,t=r.a.useState({open:!1}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(_e.Provider,{value:l},r.a.createElement(Ee.Provider,{value:o},a))},xe=function(){var e=r.a.useContext(Ee);return void 0===e?void alert("Please place useDialogDispatch in EditLayerDialogDispatchContext"):e},be=r.a.createContext(null),Ce=r.a.createContext(null),ke=function(e){var a=e.children,t=r.a.useState({sender_pos:{row:0,group:0,slot:0}}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(be.Provider,{value:l},r.a.createElement(Ce.Provider,{value:o},a))},Se=function(){var e=r.a.useContext(Ce);return void 0===e?void alert("Please place useCurrentLayerDispatch in CurrentLayerDispatchContext"):e},De=Object(c.a)((function(e){return{layerNameTextField:{margin:e.spacing(1),minWidth:120},layerTypeSelectControl:{display:"block",margin:e.spacing(1),minWidth:150},paramTextFieldGroup:{display:"flex"},paramTextField:{margin:e.spacing(1),maxWidth:150}}})),Te={conv_layer:"Convolutional",pool_layer:"Pooling",full_layer:"Fully Connected"};function Oe(e,a,t){return t.indexOf(e)===a}function je(e){var a=De(),t=function(){var e=r.a.useContext(_e);return void 0===e?void alert("Please place useDialogState in EditLayerDialogStateContext"):e}(),n=t.open,l=t.dialog_type,o=xe(),i=function(){var e=r.a.useContext(be);return void 0===e?void alert("Please place useCurrentLayerState in CurrentLayerStateContext"):e}(),c=Se(),p=F(),y=function(){var e=r.a.useContext(T);return void 0===e?void alert("Please place useSVGCardStoreState in TreePosStoreDispatchContext"):e}(),h=v(),g=f(),_=b(),E=i.sender_pos,w="".concat(E.row).concat(E.group).concat(E.slot),x=h[w],C=x.layer_name,k=x.layer_type,S=x.layer_params,D=(x.parent_pos,!1);"edit"===l&&x.inModel&&(D=!0);var O,j,N=function(e,a){switch(e){case"input_layer":return["conv_layer","pool_layer","full_layer"];case"conv_layer":case"pool_layer":return"edit"===a?["conv_layer","pool_layer"]:["conv_layer","pool_layer","full_layer"];case"full_layer":return["full_layer"]}}(k,l),P=r.a.useState("New Layer"),I=Object(m.a)(P,2),L=I[0],M=I[1],W=r.a.useState(N[0]),z=Object(m.a)(W,2),A=z[0],G=z[1],B=r.a.useState({}),R=Object(m.a)(B,2),V=(R[0],R[1],r.a.useState("New Model")),J=Object(m.a)(V,2),H=J[0],q=J[1],X=function(e){e.preventDefault(),o({open:!1})},Y=r.a.useState(5),U=Object(m.a)(Y,2),K=U[0],Q=U[1],Z=r.a.useState(5),$=Object(m.a)(Z,2),ee=$[0],ae=$[1],te=r.a.useState(16),ne=Object(m.a)(te,2),re=ne[0],le=ne[1],oe=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Window Parameters"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"Window Width",value:K,onChange:function(e){return Q(e.target.value)}}),r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"Window Height",value:ee,onChange:function(e){return ae(e.target.value)}}),"pool_layer"===A?null:r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"Window Channels",value:re,onChange:function(e){return le(e.target.value)}}))),Ee=r.a.useState(1),we=Object(m.a)(Ee,2),Ce=we[0],ke=we[1],je=r.a.useState(1),Ne=Object(m.a)(je,2),Pe=Ne[0],Ie=Ne[1],Fe=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Stride Parameters"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"X Stride",value:Ce,onChange:function(e){return ke(e.target.value)}}),r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"Y Stride",value:Pe,onChange:function(e){return Ie(e.target.value)}}))),Le=r.a.useState(16),Me=Object(m.a)(Le,2),We=Me[0],ze=Me[1],Ae=r.a.useState(!1),Ge=Object(m.a)(Ae,2),Be=Ge[0],Re=Ge[1],Ve=r.a.useState(!1),Je=Object(m.a)(Ve,2),He=Je[0],qe=Je[1],Xe=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Fully Connected Parameters"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",helperText:"Output Units",value:We,onChange:function(e){return ze(e.target.value)},disabled:Be}),r.a.createElement(pe.a,{className:a.paramTextField,control:r.a.createElement(me.a,{checked:He,onChange:function(){""!==h["000"].layer_params.dataset_name?(qe(!He),He?Re(!1):(ze(h["000"].layer_params.labels),Re(!0))):alert("Please Choose a Dataset before Finishing the Model!")},color:"secondary",disabled:D}),label:"Last Layer?"})),He?r.a.createElement(de.a,{className:a.layerNameTextField,label:"Model Name",defaultValue:"Default Value",value:H,onChange:function(e){return q(e.target.value)}}):null),Ye=r.a.useState("None"),Ue=Object(m.a)(Ye,2),Ke=Ue[0],Qe=Ue[1],Ze=r.a.useState("None"),$e=Object(m.a)(Ze,2),ea=$e[0],aa=$e[1],ta=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Activation & Regularization"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(ye.a,{className:a.layerTypeSelectControl},r.a.createElement(he.a,{style:{minWidth:150},labelId:"activation-type-select-label",variant:"outlined",value:Ke,disabled:Be,onChange:function(e){return Qe(e.target.value)}},["None","Relu","Sigmoid","Tanh"].map((function(e){return r.a.createElement(ge.a,{value:e},e)}))),r.a.createElement(ve.a,null,"Activation Type")),r.a.createElement(ye.a,{className:a.layerTypeSelectControl},r.a.createElement(he.a,{style:{minWidth:150},labelId:"activation-type-select-label",variant:"outlined",disabled:Be,value:ea,onChange:function(e){return aa(e.target.value)}},["None","L1: Lasso","L2: Ridge"].map((function(e){return r.a.createElement(ge.a,{value:e},e)}))),r.a.createElement(ve.a,null,"Activation Type")))),na=["Maximum Pooling","Average Pooling"],ra=r.a.useState(na[0]),la=Object(m.a)(ra,2),oa=la[0],ia=la[1],sa=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Pooling Parameter"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(ye.a,{className:a.layerTypeSelectControl},r.a.createElement(he.a,{style:{minWidth:150},labelId:"activation-type-select-label",variant:"outlined",value:oa,onChange:function(e){return ia(e.target.value)}},na.map((function(e){return r.a.createElement(ge.a,{value:e},e)}))),r.a.createElement(ve.a,null,"Pooling Type")))),ca=function(){return{window:{width:K,height:ee,channels:re},stride:{x:Ce,y:Pe},activation:Ke,regularization:ea}},ua=function(){return{window:{width:K,height:ee,channels:re},stride:{x:Ce,y:Pe},pooling:oa}},da=function(){return{output:{units:We},last_layer:He,activation:Ke,regularization:ea}};switch(A){case"conv_layer":O=r.a.createElement("div",null,oe,Fe,ta);break;case"pool_layer":O=r.a.createElement("div",null,oe,Fe,sa);break;case"full_layer":O=r.a.createElement("div",null,Xe,ta)}switch(l){case"edit":j=r.a.createElement(ie.a,null,r.a.createElement(u.a,{onClick:X,color:"primary"},"Cancel"),r.a.createElement(u.a,{onClick:function(a){var t;switch(a.preventDefault(),A){case"conv_layer":t=ca();break;case"pool_layer":t=ua();break;case"full_layer":t=da()}g({type:"update",layerID:w,layer_info:{layer_name:L,layer_type:A,layer_params:t}}),x.inModel&&e.editModelLayer({model_key:x.inModel,layer_key:w}),y({type:"init"}),c({sender_pos:E}),o({open:!1})},color:"primary"},"Save"),r.a.createElement(u.a,{onClick:function(e){e.preventDefault();var a=p,t=x.parent_pos,n=a.rows[t.row].groups[t.group].slots[t.slot],r=n.active_connections;(r=r.filter(Oe)).pop(),n.active_connections=r,y({type:"delete_node",sender_pos:E}),g({type:"delete",layerID:w}),x.inModel&&_({type:"delete_model",modelID:x.inModel}),c({sender_pos:t}),o({open:!1})},color:"primary"},"Delete"));break;case"add":j=r.a.createElement(ie.a,null,r.a.createElement(u.a,{onClick:X,color:"primary"},"Cancel"),r.a.createElement(u.a,{onClick:function(a){a.preventDefault();var t=p.rows[E.row].groups[E.group].slots[E.slot].active_connections,n=(t=t.filter(Oe)).length,r=Object(s.a)({},E,{connection:n});y({type:"add_child",sender_pos:r});var l,i,c="".concat(E.row+1).concat(E.group).concat(E.slot).concat(n);switch(A){case"conv_layer":l=ca();break;case"pool_layer":l=ua();break;case"full_layer":l=da()}g({type:"add",layerID:c,layer_info:{layer_name:L,layer_type:A,position:{row:E.row+1,group:"".concat(E.group).concat(E.slot),slot:n},parent_pos:E,layer_params:l}}),He&&(y({type:"add_child",sender_pos:{row:E.row+1,group:"".concat(E.group).concat(E.slot),slot:n,connection:0}}),i="".concat(E.row+2).concat(E.group).concat(E.slot).concat(n,"0"),g({type:"add",layerID:i,layer_info:{layer_name:H,layer_type:"model",layerID:i}}),e.addModel({parent_pos:{row:E.row+1,group:"".concat(E.group).concat(E.slot),slot:n},model_key:i,model_name:H})),o({open:!1})},color:"primary"},"Add"))}return r.a.useEffect((function(){qe(!1),Re(!1),"edit"===l?(M(C),G(k)):(M("New Layer"),G(N[0])),"edit"===l&&("conv_layer"===k|"pool_layer"===k?(Q(S.window.width),ae(S.window.height),le(S.window.channels),ke(S.stride.x),Ie(S.stride.y),"conv_layer"===k?(Qe(S.activation),aa(S.regularization)):ia(S.pooling)):"full_layer"===k&&(console.log(S.last_layer),ze(S.output.units),qe(S.last_layer),Qe(S.activation),Re(He),aa(S.regularization)))}),[n]),r.a.createElement(se.a,{open:n,onClose:function(){return o(!1)}},r.a.createElement(ce.a,{style:{display:"inline",float:"left"}},"edit"===l?"Edit Layer":"Add Layer"),r.a.createElement(ue.a,null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Layer Information"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.layerNameTextField,label:"Layer Name",defaultValue:"Default Value",value:L,onChange:function(e){M(e.target.value)}}),r.a.createElement(ye.a,{className:a.layerTypeSelectControl},r.a.createElement(fe.a,{shrink:!0,id:"layer-type-select-label"},"Layer Type"),r.a.createElement(he.a,{labelId:"layer-type-select-label",value:A,onChange:function(e){G(e.target.value)},displayEmpty:!0},N.map((function(e){return r.a.createElement(ge.a,{value:e},Te[e])}))))),O),j)}var Ne=r.a.createContext(null),Pe=r.a.createContext(null),Ie=function(e){var a=e.children,t=r.a.useReducer((function(e,a){switch(a.type){case"add_model":e[a.model_key]={metrics:{accuracy:[],loss:[]},status:"training",progress:0};case"update_accuracy":e[a.model_key].metrics.accuracy.push(a.accuracy);case"update_loss":e[a.model_key].metrics.loss.push(a.loss);case"update_progress":e[a.model_key].progress=a.progress;case"update_status":e[a.model_key].status=a.status}}),{}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(Ne.Provider,{value:l},r.a.createElement(Pe.Provider,{value:o},a))},Fe=r.a.createContext(null),Le=r.a.createContext(null),Me=function(e){var a=e.children,t=r.a.useState(null),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(Fe.Provider,{value:l},r.a.createElement(Le.Provider,{value:o},a))},We={conv_layer:"Convolutional",pool_layer:"Pooling",full_layer:"Fully Connected"},ze=Object(c.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},modelActionPanel:{position:"relative",marginTop:"10%",marginLeft:"1%",height:"40%",width:"95%",backgroundColor:"#FF0000"},modelActionPanelShift:{width:"calc(95% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},modelActionPanelTitle:{position:"absolute",marginTop:"2%",marginLeft:"1%"},modelActionPanelSub:{display:"absolute",marginTop:"10%",marginLeft:"10%",height:250,width:"80%",backgroundColor:"#0FF000"},paramTextFieldGroup:{display:"flex"},paramTextField:{margin:e.spacing(1),maxWidth:150},layerNameTextField:{margin:e.spacing(1),minWidth:120},layerTypeSelectControl:{display:"block",margin:e.spacing(1),minWidth:150},resultsWindow:{display:"flex",justifyContent:"space-evenly",height:600,width:1200},lossGraphWindow:{height:500,width:500,backgroundColor:"#FF00FF"},accuracyGraphWindow:{height:500,width:500,backgroundColor:"#FF00FF"}}}));function Ae(e){var a=ze(),n=function(){var e=r.a.useContext(ae);return void 0===e?void alert("Please place useCurrentLayerState in EditModelDialogStateContext"):e}(),l=n.open,o=n.model_key,i=re(),s=xe(),c=Se(),p=x(),y=(F(),v()),h=function(){var e=r.a.useContext(Fe);return void 0===e?void alert("Please place useCurrentLayerState in CurrentLayerStateContext"):e}(),g=r.a.useState(100),f=Object(m.a)(g,2),_=f[0],E=f[1],w=r.a.useState(256),b=Object(m.a)(w,2),C=b[0],k=b[1],S=r.a.useState("Gradient Descent"),D=Object(m.a)(S,2),T=D[0],O=D[1],j=r.a.useState(!1),N=Object(m.a)(j,2),P=N[0],I=N[1],L=r.a.useState(!1),M=Object(m.a)(L,2);M[0],M[1];r.a.useEffect((function(){console.log("model store changed")}),[p[o]]);var W=p[o];if(void 0===W)return r.a.createElement("div",null);console.log(W),"init"==W.status&&console.log("init"),"trained"==W.status&&console.log("trained");var z=W.layerIDs,A=function(e){return"input_layer"===e.layer_type?null:r.a.createElement(u.a,{onClick:function(a){return function(e,a){e.preventDefault(),c({sender_pos:a}),s({open:!0,dialog_type:"edit"})}(a,e.position)}},"Edit")},G=r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(V.a,null,z.map((function(e,a){var t=y[e];return r.a.createElement(J.a,{key:a},r.a.createElement(H.a,{primary:"".concat(a+1,": ").concat(t.layer_name),secondary:We[t.layer_type]+" Layer"}),A(t))})))),B=r.a.createElement(se.a,{maxWidth:"lg",open:P,onClose:function(){return I(!1)}},r.a.createElement(ce.a,null,"View Layers"),r.a.createElement(ue.a,null,G)),R=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Model Information"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.layerNameTextField,label:"Model Name",defaultValue:W.model_name})),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(u.a,{style:{margin:10},variant:"contained",onClick:function(){return I(!0)}},"View Layers"),r.a.createElement(u.a,{style:{margin:10},variant:"contained",onClick:function(){return e.reqModelFile({model_key:o})}},"Download Model")),r.a.createElement("div",{className:a.paramTextFieldGroup},function(){if(null===h)return r.a.createElement("div",null);return r.a.createElement(u.a,{onClick:function(){t(154)(h.model_file,"model.json")}},"Click Here")}())),q=r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h6",align:"left"},"Training Parameters"),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:C,onChange:function(e){return k(e.target.value)},helperText:"Batch Size"}),r.a.createElement(de.a,{className:a.paramTextField,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:_,onChange:function(e){return E(e.target.value)},helperText:"Number of Epochs"})),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(ye.a,{className:a.layerTypeSelectControl},r.a.createElement(he.a,{style:{minWidth:150},labelId:"activation-type-select-label",variant:"outlined",value:T,onChange:function(e){return O(e.target.value)}},["Gradient Descent","Adagrad","RMSProp","Adam"].map((function(e){return r.a.createElement(ge.a,{value:e},e)}))),r.a.createElement(ve.a,null,"Select Optimizer"))),r.a.createElement("div",{className:a.paramTextFieldGroup},r.a.createElement(u.a,{style:{margin:10},variant:"contained",onClick:function(){e.trainModel({model_key:o,num_epochs:_,batch_size:C,optimizer_type:T})}},"Train Model"),r.a.createElement(u.a,{style:{margin:10},variant:"contained",disabled:!0},"Download Variables")));return r.a.createElement("div",null,r.a.createElement(se.a,{open:l,onClose:function(){i({open:!1,modek_key:null})}},r.a.createElement(ce.a,null,"View Model"),r.a.createElement(ue.a,null,R,B,q)))}var Ge=t(214),Be=t(49),Re=t.n(Be),Ve=r.a.createContext(null),Je=r.a.createContext(null),He=function(e){var a=e.children,t=r.a.useState({open:!1}),n=Object(m.a)(t,2),l=n[0],o=n[1];return r.a.createElement(Ve.Provider,{value:l},r.a.createElement(Je.Provider,{value:o},a))},qe=function(){var e=r.a.useContext(Ve);return void 0===e?void alert("Please place useDialogState in ChooseDatasetDialogStateContext"):e},Xe=function(){var e=r.a.useContext(Je);return void 0===e?void alert("Please place useDialogDispatch in ChooseDatasetDialogDispatchContext"):e},Ye=Object(c.a)((function(e){return{root:{display:"flex"},modelActionPanel:{position:"relative",marginTop:"10%",marginLeft:"1%",height:"40%",width:"95%",backgroundColor:"#FF0000"},modelActionPanelTitle:{position:"absolute",marginTop:"2%",marginLeft:"1%"},modelActionPanelSub:{display:"absolute",marginTop:"10%",marginLeft:"10%",height:250,width:"80%",backgroundColor:"#0FF000"},paramTextFieldGroup:{display:"flex"},paramTextField:{margin:e.spacing(1),maxWidth:150},layerNameTextField:{margin:e.spacing(1),minWidth:120}}}));function Ue(){Ye();var e=qe().open,a=Xe(),t=(v(),f()),n=function(e,n){var r;switch(e.preventDefault(),n){case"cifar10":r={dataset_name:"CIFAR10",shape:"32 x 32 x 3",labels:10};break;case"cifar100":r={dataset_name:"CIFAR100",shape:"32 x 32 x 1",labels:100};break;case"digits_mnist":r={dataset_name:"MNIST Digits",shape:"28 x 28 x 1",labels:10};break;case"fashion_mnist":r={dataset_name:"MNSIT Fashion",shape:"28 x 28 x 1",labels:10}}t({type:"update",layerID:"000",layer_info:{layer_params:r}}),a({open:!1})},l=r.a.createElement(V.a,null,r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"CIFAR10",secondary:"Dataset of 50,000 32x32 color training images, labeled over 10 categories, and 10,000 test images."}),r.a.createElement(Ge.a,null,r.a.createElement(G.a,{edge:"end","aria-label":"Choose Dataset",onClick:function(e){return n(e,"cifar10")}},r.a.createElement(Re.a,null)))),r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"CIFAR100",secondary:"Dataset of 50,000 32x32 color training images, labeled over 100 categories, and 10,000 test images."}),r.a.createElement(Ge.a,null,r.a.createElement(G.a,{edge:"end","aria-label":"Choose Dataset",onClick:function(e){return n(e,"cifar100")}},r.a.createElement(Re.a,null)))),r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"MNIST database of handwritten digits",secondary:"Dataset of 60,000 28x28 grayscale images of the 10 digits, along with a test set of 10,000 images."}),r.a.createElement(Ge.a,null,r.a.createElement(G.a,{edge:"end","aria-label":"Choose Dataset",onClick:function(e){return n(e,"digits_mnist")}},r.a.createElement(Re.a,null)))),r.a.createElement(J.a,null,r.a.createElement(H.a,{primary:"Fashion-MNIST database of fashion articles",secondary:"Dataset of 60,000 28x28 grayscale images of 10 fashion categories, along with a test set of 10,000 images. This dataset can be used as a drop-in replacement for MNIST. The class labels are:"}),r.a.createElement(Ge.a,null,r.a.createElement(G.a,{edge:"end","aria-label":"Choose Dataset",onClick:function(e){return n(e,"fashion_mnist")}},r.a.createElement(Re.a,null)))));return r.a.createElement("div",null,r.a.createElement(se.a,{open:e,onClose:function(){a({open:!1})}},r.a.createElement(ce.a,null,"Choose Dataset"),r.a.createElement(ue.a,null,l)))}var Ke=t(81)("http://localhost:8000"),Qe=function(e){var a=e.model_key,t=e.layer_params;Ke.emit("add_new_model",{data:{model_key:a,layer_params:t}})};function Ze(){var e=xe(),a=re(),t=Se(),n=v(),l=f(),o=x(),s=b(),c=(qe(),Xe()),u=function(){var e=r.a.useContext(Le);return void 0===e?void alert("Please place useCurrentLayerDispatch in CurrentLayerDispatchContext"):e}();r.a.useEffect((function(){Ke.on("emit_model_file",(function(e){console.log("Received Model File"),u({model_key:e.model_key,model_file:e.model_file})})),Ke.on("training_end",(function(e){console.log("Train End"),s({type:"update_status",model_key:e.model_key,status:"trained"})}))}));return r.a.createElement("div",null,r.a.createElement(i.a,null),r.a.createElement(oe,null),r.a.createElement("div",{style:{position:"absolute",top:"10%"}},r.a.createElement(L,{addChild:function(a,n){a.preventDefault(),t({sender_pos:n}),e({open:!0,dialog_type:"add"})},editLayer:function(a,n){a.preventDefault(),t({sender_pos:n}),e({open:!0,dialog_type:"edit"})},editModel:function(e,t){e.preventDefault(),console.log(t),a({open:!0,model_key:t}),console.log("Edit Model")},chooseDataset:function(e){e.preventDefault(),c({open:!0})}}),r.a.createElement(je,{addModel:function(e){for(var a,t=e.parent_pos,r=e.model_name,o=e.model_key,i=[],c=t;"root"!==c;)a="".concat(c.row).concat(c.group).concat(c.slot),c=n[a].parent_pos,i.push(a);var u=[],d=i.map((function(e){return l({type:"add_to_model",layerID:e,model_key:o}),u.push(n[e]),e}));d.reverse(),u.reverse(),console.log(d),s({type:"add_model",model_key:o,model_name:r,layerIDs:d}),Qe({model_key:o,layer_params:u})},editModelLayer:function(e){for(var a=e.model_key,t=(e.layer_key,o[a].layerIDs),r=[],l=0;l<t.length;l++)r.push(n[t[l]]);Qe({model_key:a,layer_params:r})}}),r.a.createElement(Ae,{trainModel:function(e){!function(e){var a=e.model_key,t=e.num_epochs,n=e.batch_size,r=e.optimizer_type;Ke.emit("train_new_model",{data:{model_key:a,num_epochs:t,batch_size:n,optimizer_type:r}})}({model_key:e.model_key,num_epochs:e.num_epochs,batch_size:e.batch_size,optimizer_type:e.optimizer_type})},reqModelFile:function(e){!function(e){var a=e.model_key;Ke.emit("request_model_file",{data:{model_key:a}})}({model_key:e.model_key})}}),r.a.createElement(Ue,null)))}function $e(){return r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(ke,null,r.a.createElement(ne,null,r.a.createElement(g,null,r.a.createElement(w,null,r.a.createElement(He,null,r.a.createElement(we,null,r.a.createElement(Ie,null,r.a.createElement(Me,null,r.a.createElement(Ze,null)))))))))))}o.a.render(r.a.createElement($e,null),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.c7ec1cc3.chunk.js.map